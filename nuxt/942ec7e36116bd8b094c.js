(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{322:function(e,t,r){"use strict";var n=r(3),o=r(22),l=r(28),c=r(172),f=r(76),m=r(9),h=r(77).f,d=r(119).f,v=r(14).f,y=r(323).trim,_=n.Number,I=_,w=_.prototype,T="Number"==l(r(118)(w)),N="trim"in String.prototype,x=function(e){var t=f(e,!1);if("string"==typeof t&&t.length>2){var r,n,o,l=(t=N?t.trim():y(t,3)).charCodeAt(0);if(43===l||45===l){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===l){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var code,c=t.slice(2),i=0,m=c.length;i<m;i++)if((code=c.charCodeAt(i))<48||code>o)return NaN;return parseInt(c,n)}}return+t};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof _&&(T?m(function(){w.valueOf.call(r)}):"Number"!=l(r))?c(new I(x(t)),r,_):x(t)};for(var k,C=r(10)?h(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),M=0;C.length>M;M++)o(I,k=C[M])&&!o(_,k)&&v(_,k,d(I,k));_.prototype=w,w.constructor=_,r(16)(n,"Number",_)}},323:function(e,t,r){var n=r(5),o=r(21),l=r(9),c=r(324),f="["+c+"]",m=RegExp("^"+f+f+"*"),h=RegExp(f+f+"*$"),d=function(e,t,r){var o={},f=l(function(){return!!c[e]()||"​"!="​"[e]()}),m=o[e]=f?t(v):c[e];r&&(o[r]=m),n(n.P+n.F*f,"String",o)},v=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(m,"")),2&t&&(e=e.replace(h,"")),e};e.exports=d},324:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},339:function(e,t,r){"use strict";r(79);var n=r(7),o=(r(322),r(23),r(54),r(78)),l={name:"ClanMember",props:["clanTags"],data:function(){return{clanMembersInfo:[],member:[{prop:"role",label:"职位",filters:[{text:"首领",value:"leader"},{text:"副首领",value:"coLeader"},{text:"长老",value:"admin"},{text:"成员",value:"member"}],filterMethod:this.filterTag,formatter:this.formatterRole},{prop:"expLevel",label:"等级",sortable:!0},{prop:"townHallLevel",label:"大本营",sortable:!0},{prop:"warStars",label:"战争星数",sortable:!0},{prop:"donations",label:"捐兵数",sortable:!0},{prop:"donationsReceived",label:"收兵数",sortable:!0},{prop:"attackWins",label:"攻击获胜",sortable:!0}],achievements:[{prop:"gameChampion",label:this.$t("player.achievements.gameChampion"),sortable:!0},{prop:"friendInNeed",label:this.$t("player.achievements.friendInNeed"),sortable:!0},{prop:"sharingIsCaring",label:this.$t("player.achievements.sharingIsCaring"),sortable:!0}]}},watch:{clanTags:function(){this.clanMembersInfo=[],this.getAllClanMembersInfo()}},mounted:function(){this.getAllClanMembersInfo()},methods:{goToPlayerInfo:function(e){this.$router.push({path:"/players/"+e.replace("#","")})},roleType:function(e){var t="info";switch(e){case"leader":t="dark";break;case"coLeader":t="success";break;case"admin":t="primary";break;default:t="info"}return t},filterTag:function(e,t){return t.role===e},getSummaries:function(param){var e=param.columns,data=param.data,t=[];return e.forEach(function(e,r){if(0!==r){if(2!==r){var n=data.map(function(t){return Number(t[e.property])});n.every(function(e){return isNaN(e)})?t[r]="N/A":t[r]=n.reduce(function(e,t){var r=Number(t);return isNaN(r)?e:e+t},0)}}else t[r]="All"}),t[1]="N/A",t},getClanMemberListByTag:function(e){var t=this;return this.$axios.get("clans/"+o.a.tagify(e)+"/members").then(function(e){return e.data}).catch(function(e){return e.response.data&&t.$message({showClose:!0,message:t.$t("reason."+e.response.data.reason),type:"error"}),e.response.data})},getPlayerInfoByTag:function(e){return this.$axios.get("players/"+o.a.tagify(e)).then(function(e){return e.data.friendInNeed=e.data.achievements[14].value,e.data.sharingIsCaring=e.data.achievements[23].value,e.data.gameChampion=e.data.achievements[31].value,e.data}).catch(function(e){return e.response.data})},getClanMembersInfo:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,e.next=3,this.getClanMemberListByTag(t);case 3:for(n=e.sent,i=0;i<n.items.length;i++)this.getPlayerInfoByTag(n.items[i].tag).then(function(e){var t=e;r.clanMembersInfo=r.clanMembersInfo.concat(t)});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getAllClanMembersInfo:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("get"),i=0;i<this.clanTags.length;i++)this.getClanMembersInfo(this.clanTags[i]);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},c=r(2),component=Object(c.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.clanMembersInfo,stripe:"","show-summary":"","highlight-current-row":"","summary-method":e.getSummaries,"default-sort":{prop:"friendInNeed",order:"descending"}}},[r("el-table-column",{attrs:{type:"index",fixed:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"昵称",width:"150",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.league?[r("img",{staticClass:"league-icon",attrs:{src:t.row.league.iconUrls.tiny}})]:e._e(),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.goToPlayerInfo(t.row.tag)}}},[e._v("\n          "+e._s(t.row.name)+"\n        ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{"label-position":"right","label-width":"120px"}},[r("el-form-item",{attrs:{label:"标签"}},[r("el-tag",[e._v("\n              "+e._s(t.row.tag)+"\n            ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"奖杯"}},[r("el-tag",[e._v("\n              "+e._s(t.row.trophies)+"\n            ")])],1),e._v(" "),r("el-form-item",{attrs:{label:"夜世界奖杯"}},[r("el-tag",[e._v("\n              "+e._s(t.row.versusTrophies)+"\n            ")])],1)],1)]}}])}),e._v(" "),e._l(e.member,function(t,n){return r("el-table-column",{key:n,attrs:{width:t.width,fixed:t.fixed,filters:t.filters,"filter-method":t.filterMethod,sortable:t.sortable,prop:t.prop,label:t.label},scopedSlots:e._u([{key:"default",fn:function(n){return["role"===t.prop?r("el-tag",{attrs:{type:e.roleType(n.row.role)}},[e._v(e._s(e.$t("player.role."+n.row.role)))]):[e._v("\n            "+e._s(n.row[t.prop])+"\n          ")]]}}])})}),e._v(" "),e._l(e.achievements,function(e){return r("el-table-column",{key:e.prop,attrs:{width:e.width,fixed:e.fixed,filters:e.filters,"filter-method":e.filterMethod,sortable:e.sortable,prop:e.prop,label:e.label}})})],2)],1)},[],!1,null,"8a3db6b6",null);t.a=component.exports},364:function(e,t,r){"use strict";r.r(t);var n={data:function(){return{clanTag:"",clanTags:[]}},components:{MoreInfo:r(339).a},methods:{getRankInfoByTag:function(){this.clanTags=[],this.clanTags.push(this.clanTag),console.log(this.clanTags)}}},o=r(2),component=Object(o.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-input",{attrs:{placeholder:"请输入"+e.$t("clan.tag")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getRankInfoByTag()}},model:{value:e.clanTag,callback:function(t){e.clanTag=t},expression:"clanTag"}},[r("template",{slot:"prepend"},[e._v(e._s(e.$t("clan.tag")))]),e._v(" "),r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.getRankInfoByTag()}},slot:"append"})],2),e._v(" "),r("hr"),e._v(" "),e.clanTag?[r("more-info",{attrs:{clanTags:e.clanTags}})]:[e._m(0)]],2)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-center"},[this._v("\n      输入部落标签进行搜索~\n      "),t("br"),this._v("\n      因为需要对部落成员每个人的信息进行查询，所以可能较为缓慢，请稍等一会儿~\n    ")])}],!1,null,null,null);t.default=component.exports}}]);